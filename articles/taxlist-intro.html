<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Applying taxlist to species lists on diversity records • taxlist</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Applying taxlist to species lists on diversity records">
<meta property="og:description" content="taxlist">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">taxlist</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/taxlist-intro.html">Applying taxlist to species lists on diversity records</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/taxlist/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="taxlist-intro_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Applying taxlist to species lists on diversity records</h1>
                        <h4 data-toc-skip class="author">Miguel Alvarez</h4>
            
            <h4 data-toc-skip class="date">2021-07-15</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/taxlist/blob/master/vignettes/taxlist-intro.Rmd" class="external-link"><code>vignettes/taxlist-intro.Rmd</code></a></small>
      <div class="hidden name"><code>taxlist-intro.Rmd</code></div>

    </div>

    
    
<div id="getting-started" class="section level1">
<h1 class="hasAnchor">
<a href="#getting-started" class="anchor" aria-hidden="true"></a>1. Getting started</h1>
<p>The package <code>taxlist</code> aims to implement an object class and functions (methods) for handling taxonomic data in <strong>R</strong>. The homonymous object class <code>taxlist</code> can be further linked to biodiversity records (e.g. for observations in vegetation plots).</p>
<p>The <code>taxlist</code> package is developed on the repository <strong>GitHub</strong> (<a href="https://github.com/ropensci/taxlist" class="external-link">https://github.com/ropensci/taxlist</a>) and can be installed in your R-session using the package <code>devtools</code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">devtools</span><span class="op">)</span>
<span class="fu">install_github</span><span class="op">(</span><span class="st">"ropensci/taxlist"</span>, build_vignettes<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>Since this package is already available in the Comprehensive R Archive Network (CRAN), it is also possible to install it using the function <code>install.packages</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"taxlist"</span>, dependencies<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>Of course, you have to load <code>taxlist</code> into your R-session.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cran.r-project.org/package=taxlist" class="external-link">taxlist</a></span><span class="op">)</span></code></pre></div>
<p>For accessing to this vignette, use following command:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html" class="external-link">vignette</a></span><span class="op">(</span><span class="st">"taxlist-intro"</span><span class="op">)</span></code></pre></div>
</div>
<div id="extracting-a-species-list-from-a-vegetation-table" class="section level1">
<h1 class="hasAnchor">
<a href="#extracting-a-species-list-from-a-vegetation-table" class="anchor" aria-hidden="true"></a>2. Extracting a species list from a vegetation table</h1>
<div id="example-data" class="section level2">
<h2 class="hasAnchor">
<a href="#example-data" class="anchor" aria-hidden="true"></a>2.1 Example data</h2>
<p>One of the main tasks of <code>taxlist</code> is to structure taxonomic information for a further linkage to biodiversity records. This structure have to be on the one side consistent with taxonomic issues (e.g. synonyms, hierarchies, etc.), on the other side have to be flexible for containing different depth of information availability (from plain species lists to hierarchical structures).</p>
<p>In this guide, we will work with a species list from phytosociological relevés collected at the borderline between the <strong>Democratic Republic of the Congo</strong> and <strong>Rwanda</strong> (Mullenders 1953 <em>Vegetatio</em> 4(2): 73–83).</p>
<p><img src="Siegesbeckia_orientalis.png"></p>
<p>The digitized data can be loaded by following command:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/find.package.html" class="external-link">path.package</a></span><span class="op">(</span><span class="st">"taxlist"</span><span class="op">)</span>, <span class="st">"Cross.rda"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>The data is formatted as <code>data.frame</code> in <strong>R</strong>, including the names of the species in the first column:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Cross</span><span class="op">[</span> ,<span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<pre><code>##                 TaxonName 3094 3093 3092 3095 3096 3097 3098
## 1   Eragrostis tenuifolia    + &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;
## 2        Cyperus sublimis &lt;NA&gt;    + &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;
## 3    Digitaria abyssinica    +    1    2    2    2    3    1
## 4 Hyparrhenia filipendula &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;
## 5    Erigeron floribundus    +    1 &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;
## 6            Aerva lanata    +    1 &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;</code></pre>
</div>
<div id="from-plain-list-to-taxlist" class="section level2">
<h2 class="hasAnchor">
<a href="#from-plain-list-to-taxlist" class="anchor" aria-hidden="true"></a>2.2 From plain list to taxlist</h2>
<p>As already mentioned, the first column in the cross table contains the names of the species occurring in the observed plots. Thus, we can use this character vector to construct a <code>taxlist</code> object. This can be achieved through the function <code>df2taxlist</code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Splist</span> <span class="op">&lt;-</span> <span class="va">Cross</span><span class="op">[</span> ,<span class="st">"TaxonName"</span><span class="op">]</span>
<span class="va">Splist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/df2taxlist.html">df2taxlist</a></span><span class="op">(</span><span class="va">Splist</span><span class="op">)</span>
<span class="fu"><a href="../reference/summary.html">summary</a></span><span class="op">(</span><span class="va">Splist</span><span class="op">)</span></code></pre></div>
<pre><code>## object size: 9 Kb 
## validation of 'taxlist' object: TRUE 
## 
## number of taxon usage names: 35 
## number of taxon concepts: 35 
## trait entries: 0 
## number of trait variables: 0 
## taxon views: 0</code></pre>
<p>Note that the function <code>summary</code> provides a quick overview in the content of the resulting object. This function can be also applied to a specific taxon:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/summary.html">summary</a></span><span class="op">(</span><span class="va">Splist</span>, <span class="st">"Erigeron floribundus"</span><span class="op">)</span></code></pre></div>
<pre><code>## ------------------------------ 
## concept ID: 5 
## view ID: none 
## level: none 
## parent: none 
## 
## # accepted name: 
## 5 Erigeron floribundus NA 
## ------------------------------</code></pre>
</div>
</div>
<div id="built-in-data-set" class="section level1">
<h1 class="hasAnchor">
<a href="#built-in-data-set" class="anchor" aria-hidden="true"></a>3. Built-in data set</h1>
<div id="easplist" class="section level2">
<h2 class="hasAnchor">
<a href="#easplist" class="anchor" aria-hidden="true"></a>3.1 Easplist</h2>
<p>The installation of <code>taxlist</code> includes the data <code>Easplist</code>, which is formatted as a <code>taxlist</code> object. This data is a subset of the species list used by the database <strong>SWEA-Dataveg</strong> (<a href="http://www.givd.info/ID/AF-00-006" title="SWEA-Dataveg" class="external-link">GIVD ID AF-006</a>):</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Easplist</span><span class="op">)</span>
<span class="va">Easplist</span></code></pre></div>
<pre><code>## object size: 761.4 Kb 
## validation of 'taxlist' object: TRUE 
## 
## number of taxon usage names: 5393 
## number of taxon concepts: 3887 
## trait entries: 311 
## number of trait variables: 1 
## taxon views: 3 
## 
## concepts with parents: 3698 
## concepts with children: 1343 
## 
## hierarchical levels: form &lt; variety &lt; subspecies &lt; species &lt; complex &lt; genus &lt; family 
## number of concepts in level form: 2
## number of concepts in level variety: 95
## number of concepts in level subspecies: 71
## number of concepts in level species: 2521
## number of concepts in level complex: 1
## number of concepts in level genus: 1011
## number of concepts in level family: 186</code></pre>
</div>
<div id="access-to-slots" class="section level2">
<h2 class="hasAnchor">
<a href="#access-to-slots" class="anchor" aria-hidden="true"></a>3.2 Access to slots</h2>
<p>The common ways to access to the content of slots in <code>S4</code> objects are either using the function <code>slot(object, name)</code> or the symbol <code>@</code> (i.e. <code>object@name</code>). Additional functions, which are specific for <code>taxlist</code> objects are <code>taxon_names</code>, <code>taxon_relations</code>, <code>taxon_traits</code> and <code>taxon_views</code> (see the help documentation).</p>
<p>Additionally, it is possible to use the methods <code>$</code> and <code>[</code> , the first for access to information in the slot <code>taxonTraits</code>, while the second can be also used for other slots in the object.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/summary.html">summary</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">Easplist</span><span class="op">$</span><span class="va">lf_behn_2018</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##   acropleustophyte        chamaephyte     climbing_plant facultative_annual 
##                  8                 25                 25                 20 
##    obligate_annual       phanerophyte   pleustohelophyte         reed_plant 
##                114                 26                  8                 14 
##      reptant_plant      tussock_plant               NA's 
##                 19                 52               3576</code></pre>
</div>
<div id="subsets" class="section level2">
<h2 class="hasAnchor">
<a href="#subsets" class="anchor" aria-hidden="true"></a>3.3 Subsets</h2>
<p>Methods for the function <code>subset</code> are also implemented in this package. Such subsets usually apply pattern matching (for character vectors) or logical operations and are analogous to query building in relational databases. The <code>subset</code> method can be apply to any slot by setting the value of the argument <code>slot</code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Papyrus</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/subset.html">subset</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Easplist</span>, subset<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"papyrus"</span>, <span class="va">TaxonName</span><span class="op">)</span>, slot<span class="op">=</span><span class="st">"names"</span><span class="op">)</span>
<span class="fu"><a href="../reference/summary.html">summary</a></span><span class="op">(</span><span class="va">Papyrus</span>, <span class="st">"all"</span><span class="op">)</span></code></pre></div>
<p>Or the very same results:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Papyrus</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/subset.html">subset</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Easplist</span>, subset<span class="op">=</span><span class="va">TaxonConceptID</span> <span class="op">==</span> <span class="fl">206</span>, slot<span class="op">=</span><span class="st">"relations"</span><span class="op">)</span>
<span class="fu"><a href="../reference/summary.html">summary</a></span><span class="op">(</span><span class="va">Papyrus</span>, <span class="st">"all"</span><span class="op">)</span></code></pre></div>
<p>Similarly, you can look for a specific name.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Phraaus</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/subset.html">subset</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Easplist</span>,
        subset<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/charmatch.html" class="external-link">charmatch</a></span><span class="op">(</span><span class="st">"Phragmites australis"</span>, <span class="va">TaxonName</span><span class="op">)</span>, slot<span class="op">=</span><span class="st">"names"</span><span class="op">)</span>
<span class="fu"><a href="../reference/summary.html">summary</a></span><span class="op">(</span><span class="va">Phraaus</span>, <span class="st">"all"</span><span class="op">)</span></code></pre></div>
</div>
<div id="hierarchical-structure" class="section level2">
<h2 class="hasAnchor">
<a href="#hierarchical-structure" class="anchor" aria-hidden="true"></a>3.4 Hierarchical structure</h2>
<p>Objects belonging to the class <code>taxlist</code> can optionally content parent-child relationships and taxonomic levels. Such information is also included in the data <code>Easplist</code>, as shown in the summary output.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Easplist</span></code></pre></div>
<pre><code>## object size: 761.4 Kb 
## validation of 'taxlist' object: TRUE 
## 
## number of taxon usage names: 5393 
## number of taxon concepts: 3887 
## trait entries: 311 
## number of trait variables: 1 
## taxon views: 3 
## 
## concepts with parents: 3698 
## concepts with children: 1343 
## 
## hierarchical levels: form &lt; variety &lt; subspecies &lt; species &lt; complex &lt; genus &lt; family 
## number of concepts in level form: 2
## number of concepts in level variety: 95
## number of concepts in level subspecies: 71
## number of concepts in level species: 2521
## number of concepts in level complex: 1
## number of concepts in level genus: 1011
## number of concepts in level family: 186</code></pre>
<p>Note that such information can get lost once <code><a href="../reference/subset.html">subset()</a></code> has been applied, since the respective parents or children from the original data set are not anymore in the subset. May you like to recover parents and children, you can use the functions <code>get_parents</code> or <code>get_children</code>, respectively.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/summary.html">summary</a></span><span class="op">(</span><span class="va">Papyrus</span>, <span class="st">"all"</span><span class="op">)</span></code></pre></div>
<pre><code>## ------------------------------ 
## concept ID: 206 
## view ID: 1 
## level: species 
## parent: none 
## 
## # accepted name: 
## 206 Cyperus papyrus L. 
## 
## # synonyms (2): 
## 52612 Cyperus papyrus ssp. antiquorum (Willd.) Chiov. 
## 52613 Cyperus papyrus ssp. nyassicus Chiov. 
## ------------------------------</code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Papyrus</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_children.html">get_parents</a></span><span class="op">(</span><span class="va">Easplist</span>, <span class="va">Papyrus</span><span class="op">)</span>
<span class="fu"><a href="../reference/summary.html">summary</a></span><span class="op">(</span><span class="va">Papyrus</span>, <span class="st">"all"</span><span class="op">)</span></code></pre></div>
<pre><code>## ------------------------------ 
## concept ID: 206 
## view ID: 1 
## level: species 
## parent: 54853 Cyperus L. 
## 
## # accepted name: 
## 206 Cyperus papyrus L. 
## 
## # synonyms (2): 
## 52612 Cyperus papyrus ssp. antiquorum (Willd.) Chiov. 
## 52613 Cyperus papyrus ssp. nyassicus Chiov. 
## ------------------------------ 
## concept ID: 54853 
## view ID: 2 
## level: genus 
## parent: 55959 Cyperaceae Juss. 
## 
## # accepted name: 
## 54855 Cyperus L. 
## ------------------------------ 
## concept ID: 55959 
## view ID: 3 
## level: family 
## parent: none 
## 
## # accepted name: 
## 55961 Cyperaceae Juss. 
## ------------------------------</code></pre>
</div>
</div>
<div id="applying-taxlist-to-syntaxonomic-schemes" class="section level1">
<h1 class="hasAnchor">
<a href="#applying-taxlist-to-syntaxonomic-schemes" class="anchor" aria-hidden="true"></a>4. Applying taxlist to syntaxonomic schemes</h1>
<div id="example-of-a-phytosociological-classification" class="section level2">
<h2 class="hasAnchor">
<a href="#example-of-a-phytosociological-classification" class="anchor" aria-hidden="true"></a>4.1 Example of a phytosociological classification</h2>
<p>To illustrate the flexibility of the <code>taxlist</code> objects, the next example will handle a syntaxonomical scheme. As example it will be used a scheme proposed by the author for aquatic and semi-aquatic vegetation in Tanzania (Alvarez 2017 <em>Phytocoenologia</em> in review). The scheme includes 10 associations classified into 4 classes:</p>
<p><img src="wetlands_syntax.png"></p>
</div>
<div id="building-the-taxlist-object" class="section level2">
<h2 class="hasAnchor">
<a href="#building-the-taxlist-object" class="anchor" aria-hidden="true"></a>4.2 Building the taxlist object</h2>
<p>The content for the taxonomic list is included in a data frame and can be downloaded by following command:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/find.package.html" class="external-link">path.package</a></span><span class="op">(</span><span class="st">"taxlist"</span><span class="op">)</span>, <span class="st">"wetlands_syntax.rda"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>The data frame <code>Concepts</code> contains the list of syntaxon names that are considered as accepted in the previous scheme. This list will be used to insert the new concepts in the <code>taxlist</code> object.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Concepts</span><span class="op">)</span></code></pre></div>
<pre><code>##   TaxonConceptID Parent                                TaxonName
## 1              1     NA                         Lemnetea minoris
## 2              2      1                 Salvinio-Eichhornietalia
## 3              3      2                       Pistion stratiotes
## 4              4      3 Lemno paucicostatae-Pistietum stratiotes
## 5              5     NA                                Potametea
## 6              6      5                       Nymphaeetalia loti
##                                   AuthorName       Level
## 1    Koch &amp; Tüxen ex den Hartog &amp; Segal 1964       class
## 2 Borhidi ex Borhidi, Muñiz &amp; del Risco 1979       order
## 3                (Schmitz 1971) Schmitz 1988    alliance
## 4                                Lebrun 1947 association
## 5                Klika ex Klika &amp; Novák 1941       class
## 6                                Lebrun 1947       order</code></pre>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Syntax</span> <span class="op">&lt;-</span> <span class="fu">new</span><span class="op">(</span><span class="st">"taxlist"</span><span class="op">)</span>

<span class="fu"><a href="../reference/levels.html">levels</a></span><span class="op">(</span><span class="va">Syntax</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"association"</span>,<span class="st">"alliance"</span>,<span class="st">"order"</span>,<span class="st">"class"</span><span class="op">)</span>

<span class="fu"><a href="../reference/taxon_views.html">taxon_views</a></span><span class="op">(</span><span class="va">Syntax</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>ViewID<span class="op">=</span><span class="fl">1</span>, Secundum<span class="op">=</span><span class="st">"Alvarez (2017)"</span>,
        Author<span class="op">=</span><span class="st">"Alvarez M"</span>, Year<span class="op">=</span><span class="fl">2017</span>,
        Title<span class="op">=</span><span class="st">"Classification of aquatic and semi-aquatic vegetation in East Africa"</span>,
        stringsAsFactors<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>

<span class="va">Syntax</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/taxon_relations.html">add_concept</a></span><span class="op">(</span><span class="va">Syntax</span>, TaxonName<span class="op">=</span><span class="va">Concepts</span><span class="op">$</span><span class="va">TaxonName</span>,
        AuthorName<span class="op">=</span><span class="va">Concepts</span><span class="op">$</span><span class="va">AuthorName</span>, Parent<span class="op">=</span><span class="va">Concepts</span><span class="op">$</span><span class="va">Parent</span>,
        Level<span class="op">=</span><span class="va">Concepts</span><span class="op">$</span><span class="va">Level</span>, ViewID<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">Concepts</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="va">Syntax</span></code></pre></div>
<pre><code>## object size: 10.9 Kb 
## validation of 'taxlist' object: TRUE 
## 
## number of taxon usage names: 26 
## number of taxon concepts: 26 
## trait entries: 0 
## number of trait variables: 0 
## taxon views: 1 
## 
## concepts with parents: 22 
## concepts with children: 16 
## 
## hierarchical levels: association &lt; alliance &lt; order &lt; class 
## number of concepts in level association: 10
## number of concepts in level alliance: 7
## number of concepts in level order: 5
## number of concepts in level class: 4</code></pre>
<p>Note that the function <code>new</code> created an empty object (prototype), while <code>levels</code> insert the custom levels (syntaxonomical hierarchies). For the later function, the levels have to be inserted from the lower to the higher ranks. Furthermore the reference defining the concepts included in the syntaxonomic scheme was inserted in the object using the function <code>taxon_views</code> and finally the concepts were inserted by the function <code>add_concept</code>.</p>
<p>The next step will be inserting those names that are considered as synonyms for the respective syntaxa. Synonyms are included in the data frame <code>Synonyms</code>.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Synonyms</span><span class="op">)</span></code></pre></div>
<pre><code>##   TaxonConceptID                             TaxonName
## 1              1                          Stratiotetea
## 2              3                  Pistion pantropicale
## 3              8               Utriculario-Nymphaeetum
## 4              8 Utriculario exoletae-Nymphaeetum loti
## 5              9                          Phragmitetea
## 6             10                           Papyretalia
##                   AuthorName
## 1    den Hartog &amp; Segal 1964
## 2               Schmitz 1971
## 3 (Lebrun 1947) Léonard 1950
## 4    Szafranski &amp; Apema 1983
## 5      Tüxen &amp; Preising 1942
## 6                Lebrun 1947</code></pre>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Syntax</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/taxon_names.html">add_synonym</a></span><span class="op">(</span><span class="va">Syntax</span>, ConceptID<span class="op">=</span><span class="va">Synonyms</span><span class="op">$</span><span class="va">TaxonConceptID</span>,
        TaxonName<span class="op">=</span><span class="va">Synonyms</span><span class="op">$</span><span class="va">TaxonName</span>, AuthorName<span class="op">=</span><span class="va">Synonyms</span><span class="op">$</span><span class="va">AuthorName</span><span class="op">)</span></code></pre></div>
<p>Finally, the codes provided for the associations will be inserted as traits properties) of them in the slot <code>taxonTraits</code>.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Codes</span><span class="op">)</span></code></pre></div>
<pre><code>##   TaxonConceptID Code
## 1             12  HE1
## 2             13  HE2
## 3             14  HE3
## 4             20  HE4
## 5             17  HE5
## 6             18  HE6</code></pre>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/taxon_traits.html">taxon_traits</a></span><span class="op">(</span><span class="va">Syntax</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">Codes</span>
<span class="va">Syntax</span></code></pre></div>
<pre><code>## object size: 13.4 Kb 
## validation of 'taxlist' object: TRUE 
## 
## number of taxon usage names: 37 
## number of taxon concepts: 26 
## trait entries: 10 
## number of trait variables: 1 
## taxon views: 1 
## 
## concepts with parents: 22 
## concepts with children: 16 
## 
## hierarchical levels: association &lt; alliance &lt; order &lt; class 
## number of concepts in level association: 10
## number of concepts in level alliance: 7
## number of concepts in level order: 5
## number of concepts in level class: 4</code></pre>
<p>For instance, you may like to get the parental chain from an association (e.g. for <em>Nymphaeetum loti</em>).</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Nymplot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/subset.html">subset</a></span><span class="op">(</span><span class="va">Syntax</span>, <span class="fu"><a href="https://rdrr.io/r/base/charmatch.html" class="external-link">charmatch</a></span><span class="op">(</span><span class="st">"Nymphaeetum"</span>, <span class="va">TaxonName</span><span class="op">)</span>, slot<span class="op">=</span><span class="st">"names"</span><span class="op">)</span>
<span class="fu"><a href="../reference/summary.html">summary</a></span><span class="op">(</span><span class="va">Nymplot</span>, <span class="st">"all"</span><span class="op">)</span></code></pre></div>
<pre><code>## ------------------------------ 
## concept ID: 8 
## view ID: 1 
## level: association 
## parent: none 
## 
## # accepted name: 
## 8 Nymphaeetum loti Lebrun 1947 
## 
## # synonyms (2): 
## 29 Utriculario-Nymphaeetum (Lebrun 1947) Léonard 1950 
## 30 Utriculario exoletae-Nymphaeetum loti Szafranski &amp; Apema 1983 
## ------------------------------</code></pre>
<p>Note that there is the logical arguments <code>keep_parents</code> and <code>keep_children</code> to preserve hierarchical information in the subset:</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Nymplot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/subset.html">subset</a></span><span class="op">(</span><span class="va">Syntax</span>, <span class="fu"><a href="https://rdrr.io/r/base/charmatch.html" class="external-link">charmatch</a></span><span class="op">(</span><span class="st">"Nymphaeetum"</span>, <span class="va">TaxonName</span><span class="op">)</span>, slot<span class="op">=</span><span class="st">"names"</span>,
    keep_parents<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="../reference/summary.html">summary</a></span><span class="op">(</span><span class="va">Nymplot</span>, <span class="st">"all"</span><span class="op">)</span></code></pre></div>
<pre><code>## ------------------------------ 
## concept ID: 5 
## view ID: 1 
## level: class 
## parent: none 
## 
## # accepted name: 
## 5 Potametea Klika ex Klika &amp; Novák 1941 
## ------------------------------ 
## concept ID: 6 
## view ID: 1 
## level: order 
## parent: 5 Potametea Klika ex Klika &amp; Novák 1941 
## 
## # accepted name: 
## 6 Nymphaeetalia loti Lebrun 1947 
## ------------------------------ 
## concept ID: 7 
## view ID: 1 
## level: alliance 
## parent: 6 Nymphaeetalia loti Lebrun 1947 
## 
## # accepted name: 
## 7 Nymphaeion loti Lebrun 1947 
## ------------------------------ 
## concept ID: 8 
## view ID: 1 
## level: association 
## parent: 7 Nymphaeion loti Lebrun 1947 
## 
## # accepted name: 
## 8 Nymphaeetum loti Lebrun 1947 
## 
## # synonyms (2): 
## 29 Utriculario-Nymphaeetum (Lebrun 1947) Léonard 1950 
## 30 Utriculario exoletae-Nymphaeetum loti Szafranski &amp; Apema 1983 
## ------------------------------</code></pre>
<p>By using the function <code>subset</code> we just created a new object containing only the association <em>Nymphaeetum loti</em> and its parental chain. This subset was then used to extract the parental chain from <code>Syntax</code>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Miguel Alvarez.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link external-link">pkgdown</a> 1.6.1.9001.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
